<div class="container py-5">
  <h2 class="text-info mb-3">Jugadores Transferibles</h2>
  <p class="text-light mb-4">
    Transferencias abiertas. ¿A quién fichás para tu equipo campeón?
  </p>

  <div class="table-responsive table-wrapper">
    <table class="table table-hover mb-0">
      <thead>
        <tr>
          <th>Jugador</th>
          <th>Equipo Actual</th>
          <th>Valoración</th>
          <th>Posición</th>
          <th>Accion</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let player of playersList">
          <td class="player-name">
            <span>
              <img
                [src]="
                  player?.photo
                    ? player.photo.secureUrl
                    : '../../../assets/images/player-default.png'
                "
                class="mb-2"
                width="60"
                height="60"
                style="
                  object-fit: cover;
                  background-color: #303134;
                  border-color: #303134;
                  margin-right: 2%;
                "
              />
            </span>
            {{ player.fullName }}
          </td>
          <td class="text-center player-name">
            <div class="d-flex flex-column align-items-center">
              <img
                [src]="
                  player?.team?.logo?.secureUrl
                    ? player?.team?.logo?.secureUrl
                    : ''
                "
                alt="Logo equipo"
                width="40"
                height="40"
                style="object-fit: cover; margin-bottom: 5px"
              />
              <span>{{ player?.team?.name }}</span>
            </div>
          </td>
          <td>
            <span class="rating-badge">{{ player.valoration }}</span>
          </td>
          <td>
            <span
              class="tag"
              [ngClass]="{
                gk: player.position == 'GK',
                defence: player.position == 'DFI' || 'DFC' || 'DFD',
                medio: player.position == 'MCO',
                attack: player.position == 'DC'
              }"
              >{{ player?.position }}</span
            >
          </td>
          <td>
            <button class="btn btn-warning" (click)="onBird(player)">
              Ofertar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<nz-modal
  [(nzVisible)]="isVisible"
  [nzTitle]="modalTitle"
  [nzContent]="modalContent"
  [nzFooter]="modalFooter"
  [nzWidth]="1200"
  (nzOnCancel)="handleCancel()"
>
  <ng-template #modalTitle>Oferta de transferencia</ng-template>

  <ng-template #modalContent>
    <div class="container">
      <form [formGroup]="form" nz-form [nzLayout]="'vertical'">
        <div class="row">
          <div class="col-md-6">
            <nz-form-item>
              <nz-form-label nzFor="manager">Jugador Entrante</nz-form-label>
              <nz-form-control>
                <input nz-input formControlName="playerOut" />
              </nz-form-control>
            </nz-form-item>
          </div>

          <div class="col-md-6">
            <nz-form-item>
              <nz-form-label nzFor="teams">Jugador Salida</nz-form-label>
              <nz-form-control>
                <nz-select formControlName="playerIn">
                  <nz-option
                    *ngFor="let item of myPlayers"
                    [nzValue]="item.id"
                    [nzLabel]="item.name + ' ' + item.lastName"
                  ></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>
      </form>

      <div class="row">
        <div class="col-md-6">
          <div class="d-flex flex-column align-items-center">
            <img
              [src]="
                player?.photo
                  ? player.photo.secureUrl
                  : '../../../assets/images/player-default.png'
              "
              alt="Logo equipo"
              width="40"
              height="40"
              style="object-fit: cover; margin-bottom: 5px"
            />
            <span>{{ player?.team?.name }}</span>
          </div>
        </div>

        <div class="col-md-6">
          <div class="d-flex flex-column align-items-center">
            <img
              [src]="
                player?.photo
                  ? player.photo.secureUrl
                  : '../../../assets/images/player-default.png'
              "
              alt="Logo equipo"
              width="40"
              height="40"
              style="object-fit: cover; margin-bottom: 5px"
            />
            <span>{{ player?.team?.name }}</span>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <ng-template #modalFooter>
    <div class="row text-center">
      <div class="col-md-2">
        <button class="btn btn-warning" (click)="onSubmit()">Confirmar</button>
      </div>
    </div>
  </ng-template>
</nz-modal>
