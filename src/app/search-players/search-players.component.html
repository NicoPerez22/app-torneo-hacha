<div class="container">
  <!-- Header Section -->
  <div class="players-header">
    <div class="header-content">
      <h1 class="players-title text-info">
        <i class="bi bi-people-fill me-2"></i>
        Jugadores Transferibles
      </h1>
      <p class="players-subtitle">
        Transferencias abiertas. ¿A quién fichás para tu equipo campeón?
      </p>
    </div>

    <div class="header-actions">
      <button class="btn-create-team" (click)="onListBirdAdmin()" *ngIf="user?.idRol == 1">
        <i class="bi bi-list me-2"></i>
        Comprobar Ofertas
      </button>

      <button class="btn-assign-manager" (click)="onListBird()">
        <i class="bi bi-hand-thumbs-up me-2"></i>
        Mis ofertas
      </button>
    </div>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="playersList?.length === 0">
    <i class="bi bi-person-x empty-icon"></i>
    <h3>No hay jugadores disponibles</h3>
    <p>No hay jugadores transferibles en este momento</p>
  </div>

  <!-- Grid de cards -->
  <div class="players-grid" *ngIf="playersList?.length > 0">
    <div
      class="player-card"
      *ngFor="
        let player of playersList
          | paginate: { id: playersPaginationId, itemsPerPage: playersPerPage, currentPage: playersPage }
      "
    >
      <div class="player-card-inner">
        <!-- Glow effect -->
        <div class="card-glow"></div>
        
        <!-- Player Photo Container -->
        <div class="player-photo-container">
          <div class="photo-wrapper">
            <img
              [src]="player?.photo?.secureUrl || '../../../assets/images/player-default.png'"
              [alt]="player.fullName"
              class="player-photo"
            />
          </div>
        </div>

        <!-- Content -->
        <div class="player-content">
          <h3 class="player-name">{{ player.fullName }}</h3>
          
          <!-- Team Info -->
          <div class="player-team" *ngIf="player?.team">
            <div class="team-logo-wrapper">
              <img
                [src]="player?.team?.logo?.secureUrl || '../../../assets/images/player-default.png'"
                [alt]="player.team.name"
                class="team-logo"
              />
            </div>
            <span class="team-name">{{ player.team.name }}</span>
          </div>

          <!-- Stats -->
          <div class="player-stats">
            <div class="stat-item">
              <span class="stat-label">Valoración</span>
              <span class="rating-badge">{{ player.valoration }}</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Posición</span>
              <span
                class="position-tag"
                [ngClass]="{
                  gk: player.position == 'POR',
                  defence: player.position == 'LD' || player.position == 'LI' || player.position == 'DFC' || player.position == 'DFD' || player.position == 'DFD',
                  medio: player.position == 'MCO' || player.position == 'MC' || player.position == 'MCD' || player.position == 'MI' || player.position == 'MD',
                  attack: player.position == 'DC' || player.position == 'ED' || player.position == 'EI'
                }"
              >
                {{ player?.position }}
              </span>
            </div>
          </div>

          <!-- Footer -->
          <div class="player-footer" *ngIf="user?.teams?.[0]?.id !== player?.team?.id">
            <button class="btn-offer" (click)="onBird(player)">
              <i class="bi bi-hand-thumbs-up me-2"></i>
              Ofertar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="pagination-wrapper" *ngIf="(playersList?.length || 0) > playersPerPage">
    <pagination-controls
      [id]="playersPaginationId"
      (pageChange)="playersPage = $event"
      previousLabel="Anterior"
      nextLabel="Siguiente"
    ></pagination-controls>
  </div>
</div>
