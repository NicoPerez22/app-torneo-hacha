<div class="container">
  <!-- Header Section -->
  <div class="tournament-header">
    <div class="header-content">
      <img [src]="tournament?.logo || '../../../assets/images/HYT-IESA.png'" alt="Tournament Logo"
        class="tournament-logo" />
      <h1 class="tournament-title">{{ tournament?.name }}</h1>
      <p class="tournament-subtitle">{{ tournament?.format?.description }}</p>
    </div>
  </div>

  <!-- Tabs Section -->
  <div class="tabs-container">
    <nz-tabset nzCentered>
      <!-- Tab: Tabla de posiciones -->
      <!-- Tab: Tabla de posiciones -->
      <nz-tab nzTitle="Tabla de posiciones">
        <div class="row g-3">
          <!-- Tabla(s) -->
          <div class="col-12 col-lg-8">
            <div class="group-card mb-3" *ngFor="let table of rankingTables">
              <h6 class="group-title" *ngIf="table.groupName">{{ table.groupName }}</h6>

              <div class="table-card">
                <div class="table-wrapper">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>POS</th>
                        <th style="text-align: left;">Equipo</th>
                        <th>PTS</th>
                        <th>PJ</th>
                        <th>PG</th>
                        <th>PE</th>
                        <th>PP</th>
                        <th class="d-none d-lg-table-cell">GF</th>
                        <th class="d-none d-lg-table-cell">GC</th>
                        <th>DIF</th>
                      </tr>
                    </thead>

                    <tbody>
                      <tr *ngFor="let rank of table.rows; let i = index">
                        <td>
                          <span
                            class="position-badge"
                            [ngClass]="getPositionBadgeClass(i, table.rows.length)"
                          >
                            {{ i + 1 }}
                          </span>
                        </td>

                        <td>
                          <div class="team-cell">
                            <img [src]="rank?.logoUrl || '../../../assets/images/player-default.png'" alt="Team Logo"
                              class="team-logo" />
                            <span class="team-name-text">{{ rank.teamName }}</span>
                          </div>
                        </td>

                        <td><span class="points-badge">{{ rank.points }}</span></td>
                        <td>{{ getPlayed(rank) }}</td>
                        <td>{{ rank.wins }}</td>
                        <td>{{ rank.draws }}</td>
                        <td>{{ rank.losses }}</td>
                        <td class="d-none d-lg-table-cell">{{ rank.goalsFor }}</td>
                        <td class="d-none d-lg-table-cell">{{ rank.goalsAgainst }}</td>
                        <td>{{ rank.goalDifference }}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- Fixtures (los dejé igual) -->
          <div class="col-12 col-lg-4">
            <div class="fixtures-container">
              <div class="group-card" *ngFor="let group of rounds">
                
                <h6 class="group-title">
                  {{
                    isGroupStage
                      ? ('Grupo ' + group.groupNumber)
                      : ('Fecha ' + (pagination?.page ?? currentPage))
                  }}
                </h6>

                <ul class="matches-list">
                  <li class="match-item" *ngFor="let match of group.rounds">
                    <div class="team left">
                      <img [src]="match?.homeLogoUrl || '../../../assets/images/player-default.png'" alt="Home Team" />
                      <span>{{ match.homeTeamName }}</span>
                    </div>

                    <div class="vs">
                      <span>{{ match.homeGoals ?? '-' }}</span>
                      VS
                      <span>{{ match.awayGoals ?? '-' }}</span>
                    </div>

                    <div class="team right">
                      <span>{{ match.awayTeamName }}</span>
                      <img [src]="match?.awayLogoUrl || '../../../assets/images/player-default.png'" alt="Away Team" />
                    </div>
                  </li>
                </ul>
              </div>
            </div>

            <div class="pagination-wrapper" *ngIf="pagination && pagination.totalPages > 1">
              <ul class="ngx-pagination">
                <li [class.disabled]="currentPage === 1">
                  <a (click)="goToPage(currentPage - 1)">Anterior</a>
                </li>

                <li *ngFor="let p of visiblePages" [class.current]="p === currentPage">
                  <span *ngIf="p === currentPage">{{ p }}</span>
                  <a *ngIf="p !== currentPage" (click)="goToPage(p)">{{ p }}</a>
                </li>

                <li [class.disabled]="currentPage === pagination?.totalPages">
                  <a (click)="goToPage(currentPage + 1)">Siguiente</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </nz-tab>

      <!-- Tab: Goleadores -->
      <nz-tab nzTitle="Goleadores">
        <div class="row">
          <div class="col-12">
            <div class="table-card">
              <div class="table-wrapper">
                <table class="table">
                  <thead>
                    <tr>
                      <th>POS</th>
                      <th style="text-align: left;">Jugador</th>
                      <th>PJ</th>
                      <th>Goles</th>
                      <th class="d-none d-sm-table-cell">Asist.</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let player of tournament?.teams; let i = index">
                      <td>
                        <span class="position-badge" [ngClass]="{
                            'top': i < 3,
                            'mid': i >= 3
                          }">
                          {{ i + 1 }}
                        </span>
                      </td>
                      <td>
                        <div class="team-cell">
                          <img [src]="player?.logo?.secureUrl || '../../../assets/images/player-default.png'"
                            alt="Player" class="team-logo" />
                          <span class="team-name-text">{{ player.name }}</span>
                        </div>
                      </td>
                      <td>12</td>
                      <td>
                        <span class="points-badge">12</span>
                      </td>
                      <td class="d-none d-sm-table-cell">12</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </nz-tab>

      <!-- Tab: Tarjetas -->
      <nz-tab nzTitle="Tarjetas">
        <div class="row">
          <div class="col-12">
            <div class="table-card">
              <div class="table-wrapper">
                <table class="table">
                  <thead>
                    <tr>
                      <th style="text-align: left;">Jugador</th>
                      <th>Motivo</th>
                      <th class="d-none d-sm-table-cell">Sanción</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let player of tournament?.teams; let i = index">
                      <td>
                        <div class="team-cell">
                          <img [src]="player?.logo?.secureUrl || '../../../assets/images/player-default.png'"
                            alt="Player" class="team-logo" />
                          <span class="team-name-text">{{ player.name }}</span>
                        </div>
                      </td>
                      <td>{{ i + 1 }}</td>
                      <td class="d-none d-sm-table-cell">12</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </nz-tab>
    </nz-tabset>
  </div>
</div>